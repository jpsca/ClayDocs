{#def page_toc #}

{% set max_depth = 3 %}
{% set margins = ["ml-0", "ml-2", "ml-3", "ml-4"] %}

{% macro render_item(url, title, depth=0) %}
<li class="{{ margins[depth] }}">
  <a href="{{ url }}"
    class="
      flex
      items-center
      py-2
      leading-snug
      text-zinc-600
      hover:text-zinc-900
      dark:text-zinc-500
      dark:hover:text-zinc-100
      [&.active]:text-accent
      [&.active]:dark:text-accent-darker
    "
  >
    {{ title }}
  </a>
</li>
{% endmacro %}

{% macro render_sub_items(pages, depth=0) %}
{%- for url, title, children in pages %}
  {{ render_item(url, title, depth) }}
  {% if depth < max_depth -%}
    {{ render_sub_items(children, depth) }}
  {%- endif %}
{%- endfor %}
{% endmacro %}

<ul class="text-sm leading-6">
{%- for url, title, children in page_toc %}
  {{ render_item(url, title) }}
  {{ render_sub_items(children, depth=1) }}
{%- endfor %}
</ul>
